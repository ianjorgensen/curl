var fs = require('fs');

var files = [__dirname + '/mime.types'];

exports.avi = 'video/divx';

for (var i=0; i<files.length; i++) {
	try {
		var ls = fs.readFileSync(files[i], 'utf8').split('\n');

		ls.forEach(function(line) {
			var reg = /^(\S*)\s*(\S*)$/,
			    res = line.split(/\s+/);
			
			if(!res[1]) return;
			
			var type = res.shift(),
			    exts = res;
		
			exts.forEach(function(ext) {
				exports[ext] = exports[ext] || type;
			});
		});
		break;
	} catch(err) {}
}

exports.resolve = function(fname) {
	return exports[fname.split('.').pop().split('~')[0].toLowerCase()] || 'application/octet-stream';
};